<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student Marks Table</title>
</head>
<body>

  <h2>Student Marks Table</h2>
  <button onclick="addStudent()">Add Student</button>
  <br><br>

  <table id="marksTable" border="1" cellspacing="0" cellpadding="5">
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Subject 1</th>
        <th>Subject 2</th>
        <th>Subject 3</th>
        <th>Subject 4</th>
        <th>Subject 5</th>
        <th>Total Marks</th>
        <th>Average Marks</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>
    window.onload = function() {
      let storedStudents = JSON.parse(localStorage.getItem("students") || "[]");
      storedStudents.forEach(student => addStudentToTable(student));
    }

    function addStudent() {
      var studentName = prompt("Enter the student's name:");
      if (!studentName) return;

      var marks = [];
      for (var i = 1; i <= 5; i++) {
        var mark = prompt("Enter marks for Subject " + i + " (out of 100):");
        if (mark === null) return;
        mark = parseFloat(mark);
        if (isNaN(mark) || mark < 0 || mark > 100) {
          alert("Please enter a valid number between 0 and 100.");
          i--; 
          continue;
        }
        marks.push(mark);
      }

      var total = marks.reduce((a, b) => a + b, 0);
      var avg = (total / marks.length).toFixed(2);

      var student = {
        name: studentName,
        marks: marks,
        total: total,
        avg: avg
      };

      addStudentToTable(student);

      let students = JSON.parse(localStorage.getItem("students") || "[]");
      students.push(student);
      localStorage.setItem("students", JSON.stringify(students));
    }

    function addStudentToTable(student) {
      var tableBody = document.getElementById("marksTable").getElementsByTagName("tbody")[0];
      var newRow = tableBody.insertRow();

      var nameCell = newRow.insertCell();
      nameCell.textContent = student.name;

      student.marks.forEach(mark => {
        var cell = newRow.insertCell();
        cell.textContent = mark;
      });

      var totalCell = newRow.insertCell();
      totalCell.textContent = student.total;

      var avgCell = newRow.insertCell();
      avgCell.textContent = student.avg;
    }
  </script>

</body>
</html>
